let e=null;const t=[];class s{subs=/* @__PURE__ */new Set;depend(){e&&!this.subs.has(e)&&(this.subs.add(e),e.deps.push(this))}notify(){this.subs.forEach(e=>{e.scheduler?e.scheduler(e.run.bind(e)):e.run()})}}class n{constructor(e,t=null){this.fn=e,this.scheduler=t,this.deps=[],this.active=!0}run(){if(this.active)try{return t.push(this),e=this,this.fn()}finally{t.pop(),e=t[t.length-1]||null}}stop(){this.active&&(this.deps.forEach(e=>e.subs.delete(this)),this.deps=[],this.active=!1)}}const r=(e,t={})=>{const s=new n(e,t.scheduler);return s.run(),()=>s.stop()},i=Symbol(),o=Symbol(),c=/* @__PURE__ */new WeakMap,a=e=>e&&"object"==typeof e,l=e=>{if(!a(e)||e[o])return e;const t=c.get(e);if(t)return t;const n=/* @__PURE__ */new Map,r=e=>{let t=n.get(e);return t||(t=new s,n.set(e,t)),t},u=new Proxy(e,{get:(e,t)=>{if(t===o)return!0;if(t===i)return e;r(t).depend();const s=Reflect.get(e,t);return s&&s._isRef?s:a(s)?l(s):s},set:(e,t,s)=>{const n=e[t],i=Reflect.set(e,t,s);return Object.is(n,s)||r(t).notify(),i},deleteProperty:(e,t)=>{const s=t in e,n=Reflect.deleteProperty(e,t);return s&&r(t).notify(),n}});return c.set(e,u),u},u=e=>{const t=new s;return{_isRef:!0,get value(){return t.depend(),e},set value(s){Object.is(s,e)||(e=s,t.notify())},toString:()=>String(e)}},f=e=>{let t,r=!0;const i=new s,o=new n(e,()=>{r||(r=!0,i.notify())});return{_isRef:!0,get value(){return r&&(t=o.run(),r=!1),i.depend(),t},_effect:o}};class h{constructor(e){this.data=e,this.effects=[],this.listeners=[]}addEffect(e){this.effects.push(e)}addListener(e,t,s){this.listeners.push({el:e,ev:t,fn:s})}cleanup(){this.effects.forEach(e=>e()),this.listeners.forEach(({el:e,ev:t,fn:s})=>e.removeEventListener(t,s)),this.effects=[],this.listeners=[]}}const d=(e,t)=>{try{const s=Object.keys(t),n=s.map(e=>t[e]?._isRef?t[e].value:t[e]);return Function(...s,`"use strict";return(${e})`)(...n)}catch(s){return}},p=(e,t,s)=>{if(e){if(3===e.nodeType){const n=e.textContent;return void(n.includes("{{")&&s.addEffect(r(()=>{e.textContent=n.replace(/{{\s*(.*?)\s*}}/g,(e,s)=>d(s,t)??"")})))}if(1===e.nodeType){if(e.hasAttribute("z-if")){const n=[];let i=e,o=e.parentNode;if(!o)return;const c=document.createComment("z-if");for(o.insertBefore(c,e);i;){const e=["z-if","z-else-if","z-else"].find(e=>i.hasAttribute(e));if(!e)break;const t=i.getAttribute(e);i.removeAttribute(e),n.push({el:i,exp:t,type:e,scope:null});const s=i.nextElementSibling;i.remove(),i=s}return s.addEffect(r(()=>{const e=n.find(e=>"z-else"===e.type||d(e.exp,t));n.forEach(s=>{s===e?s.el.parentNode||(o.insertBefore(s.el,c),s.scope||(s.scope=new h({...t}),p(s.el,s.scope.data,s.scope))):(s.el.parentNode&&s.el.remove(),s.scope&&(s.scope.cleanup(),s.scope=null))})})),void s.addEffect(()=>n.forEach(e=>e.scope?.cleanup()))}if(!e.hasAttribute("z-else-if")&&!e.hasAttribute("z-else")){if(e.hasAttribute("z-for")){const n=e.getAttribute("z-for"),i=n.match(/^\s*(?:\((\w+)\s*,\s*(\w+)\)|(?:(\w+)))\s+(?:in|of)\s+(.*)$/);let o="item",c="index",a=n;if(i)o=i[1]||i[3]||"item",c=i[2]||"index",a=i[4];else{const e=n.split(/\s+in\s+|\s+of\s+/);2===e.length&&(o=e[0].trim(),a=e[1].trim())}const l=e.parentNode;if(!l)return;const f=document.createComment("z-for");l.insertBefore(f,e),e.remove(),e.removeAttribute("z-for");let v=[];return s.addEffect(r(()=>{v.forEach(({clone:e,scope:t})=>{e.remove(),t.cleanup()}),v=[];const s=d(a,t)||[];Array.isArray(s)&&s.forEach((s,n)=>{const r=e.cloneNode(!0);l.insertBefore(r,f);const i=new h({...t,[o]:u(s),[c]:u(n)});p(r,i.data,i),v.push({clone:r,scope:i})})})),void s.addEffect(()=>v.forEach(({scope:e})=>e.cleanup()))}Array.from(e.attributes).forEach(({name:n,value:i})=>{if(n.startsWith("@")||n.startsWith("z-on:")){const r=n.startsWith("@")?n.slice(1):n.slice(5);e.removeAttribute(n);const o=e=>{const s=t[i];"function"==typeof s?s(e):d(i,t)};e.addEventListener(r,o),s.addListener(e,r,o)}else if("z-model"===n){e.removeAttribute(n);const o="checkbox"===e.type||"radio"===e.type,c=o?"checked":"value",a=o||"SELECT"===e.tagName?"change":"input",l=()=>{const s=e[c];if("radio"===e.type&&!e.checked)return;const n=t[i];n?._isRef?n.value=s:void 0!==t[i]&&(t[i]=s)};e.addEventListener(a,l),s.addListener(e,a,l),s.addEffect(r(()=>{const s=d(i,t);"radio"===e.type?e.checked=String(e.value)===String(s):e[c]=s}))}else if(n.startsWith(":")||n.startsWith("z-")){const o=n.startsWith(":")?n.slice(1):n;e.removeAttribute(n);const c="class"===o?e.className:"";s.addEffect(r(()=>{const s=d(i,t);if("z-text"===o)e.textContent=s??"";else if("z-html"===o)e.innerHTML=s??"";else if("z-show"===o)e.style.display=s?"":"none";else if("style"===o&&a(s))Object.assign(e.style,s);else if("class"===o&&a(s)){const t=Object.keys(s).filter(e=>s[e]).join(" ");e.className=(c+" "+t).trim()}else{const t=o.startsWith("z-")?o.slice(2):o;e.setAttribute(t,s??"")}}))}}),Array.from(e.childNodes).forEach(e=>p(e,t,s))}}}},v="undefined"!=typeof window,m=()=>v?Object.fromEntries(new URLSearchParams(location.search)):{},y={h:u(v?location.hash:""),p:u(v?location.pathname:""),q:u(v?m():{})},b=()=>{v&&(y.h.value=location.hash,y.p.value=location.pathname,y.q.value=m())};v&&(addEventListener("hashchange",b),addEventListener("popstate",b));const E={get hash(){return y.h.value},get path(){return y.p.value},get query(){return y.q.value}},g=e=>{let t=null;return{mount(s){const n=document.querySelector(s);if(!n)return;const r=e();return t=new h(r),p(n,r,t),this},unmount(){t&&(t.cleanup(),t=null)}}},w=e=>Promise.resolve().then(e),z=e=>e?._isRef?e.value:e,A=(e,t)=>{const s=e[t];return s?._isRef?s:{_isRef:!0,get value(){return e[t]},set value(s){e[t]=s}}};export{f as computed,g as createApp,w as nextTick,l as reactive,u as ref,E as route,A as toRef,z as unref,r as watchEffect};
