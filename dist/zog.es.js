let e=null;class t{constructor(){this.subs=/* @__PURE__ */new Set}depend(){e&&this.subs.add(e)}notify(){this.subs.forEach(e=>e())}}function n(t){const n=e;e=t;try{t()}finally{e=n}}function o(e){const n=new t;return{_isRef:!0,get value(){return n.depend(),e},set value(t){t!==e&&(e=t,n.notify())},toString:()=>e}}const r=(e,t)=>{try{const n=Object.keys(t),o=n.map(e=>t[e]?._isRef?t[e].value:t[e]);return new Function(...n,`return ${e}`)(...o)}catch{return}},s=(e,t)=>{if(e){if(3===e.nodeType){const o=e.textContent;return void(o.includes("{{")&&n(()=>{e.textContent=o.replace(/{{\s*(.*?)\s*}}/g,(e,n)=>r(n,t))}))}if(1===e.nodeType){if(e.hasAttribute("z-if")){const o=[];let i=e;const a=e.parentNode;if(!a)return;const c=document.createComment("z-if");for(a.insertBefore(c,e);i;){const e=["z-if","z-else-if","z-else"].find(e=>i.hasAttribute(e));if(!e)break;const t=i.getAttribute(e);i.removeAttribute(e),o.push({el:i,exp:t,type:e});const n=i.nextElementSibling;i.remove(),i=n}return void n(()=>{const e=o.find(e=>"z-else"===e.type||r(e.exp,t));o.forEach(n=>{n===e?document.contains(n.el)||(a.insertBefore(n.el,c.nextSibling),n.el._isCompiled||(n.el._isCompiled=!0,s(n.el,t))):document.contains(n.el)&&n.el.remove()})})}if(!e.hasAttribute("z-else-if")&&!e.hasAttribute("z-else")){if(e.hasAttribute("z-for")){const[o,i]=e.getAttribute("z-for").split(" in ").map(e=>e.trim()),a=e.parentNode;if(!a)return;const c=document.createComment("z-for");a.insertBefore(c,e),e.remove(),e.removeAttribute("z-for");let l=[];return void n(()=>{l.forEach(e=>e.remove()),l=[];const n=r(i,t)||[];Array.isArray(n)&&n.forEach((n,r)=>{const i=e.cloneNode(!0);a.insertBefore(i,c),l.push(i);const u={...t,[o]:{value:n,_isRef:!0},index:r};s(i,u)})})}Array.from(e.attributes).forEach(({name:o,value:s})=>{if(o.startsWith("@")||o.startsWith("z-on:")){const n=o.startsWith("@")?o.slice(1):o.slice(5);e.removeAttribute(o),e.addEventListener(n,e=>{const n=t[s];"function"==typeof n?n(e):r(s,t)})}else if("z-model"===o){e.removeAttribute(o);const i="checkbox"===e.type||"radio"===e.type,a=i?"checked":"value",c=i||"SELECT"===e.tagName?"change":"input";e.addEventListener(c,()=>{let n=e[a];("radio"!==e.type||e.checked)&&t[s]&&(t[s].value=n)}),n(()=>{const n=r(s,t);"radio"===e.type?e.checked=String(e.value)===String(n):e[a]=n})}else if(o.startsWith(":")||o.startsWith("z-")){const i=o.startsWith(":")?o.slice(1):o;o.startsWith(":")&&e.removeAttribute(o),n(()=>{const n=r(s,t);"z-text"===i?e.textContent=n:"z-html"===i?e.innerHTML=n:"z-show"===i?e.style.display=n?"":"none":"style"===i&&"object"==typeof n?Object.assign(e.style,n):"class"===i&&"object"==typeof n?e.className=Object.keys(n).filter(e=>n[e]).join(" "):e.setAttribute(i,n)})}}),e.childNodes.forEach(e=>s(e,t))}}}},i="undefined"!=typeof window,a=()=>i?Object.fromEntries(new URLSearchParams(window.location.search)):{},c={h:o(i?window.location.hash:""),p:o(i?window.location.pathname:""),q:o(a())},l=()=>{i&&(c.h.value=window.location.hash,c.p.value=window.location.pathname,c.q.value=a())};i&&(window.addEventListener("hashchange",l),window.addEventListener("popstate",l));const u={get hash(){return c.h.value},get path(){return c.p.value},get query(){return c.q.value}};function d(e){return{mount(t){const n=document.querySelector(t),o=e();s(n,o)}}}export{d as createApp,o as ref,u as route,n as watchEffect};
