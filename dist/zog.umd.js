!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ZogLibrary={})}(this,function(e){"use strict";let t=null;class n{constructor(){this.subs=new Set}depend(){t&&this.subs.add(t)}notify(){this.subs.forEach(e=>e())}}function o(e){const n=t;t=e;try{e()}finally{t=n}}function i(e){const t=new n;return{_isRef:!0,get value(){return t.depend(),e},set value(n){n!==e&&(e=n,t.notify())},toString:()=>e}}const r=(e,t)=>{try{const n=Object.keys(t),o=n.map(e=>t[e]?._isRef?t[e].value:t[e]);return new Function(...n,`return ${e}`)(...o)}catch{return}},s=(e,t)=>{if(e){if(3===e.nodeType){const n=e.textContent;return void(n.includes("{{")&&o(()=>{e.textContent=n.replace(/{{\s*(.*?)\s*}}/g,(e,n)=>r(n,t))}))}if(1===e.nodeType){if(e.hasAttribute("z-if")){const n=[];let i=e;const a=e.parentNode;if(!a)return;const c=document.createComment("z-if");for(a.insertBefore(c,e);i;){const e=["z-if","z-else-if","z-else"].find(e=>i.hasAttribute(e));if(!e)break;const t=i.getAttribute(e);i.removeAttribute(e),n.push({el:i,exp:t,type:e});const o=i.nextElementSibling;i.remove(),i=o}return void o(()=>{const e=n.find(e=>"z-else"===e.type||r(e.exp,t));n.forEach(n=>{n===e?document.contains(n.el)||(a.insertBefore(n.el,c.nextSibling),n.el._isCompiled||(n.el._isCompiled=!0,s(n.el,t))):document.contains(n.el)&&n.el.remove()})})}if(!e.hasAttribute("z-else-if")&&!e.hasAttribute("z-else")){if(e.hasAttribute("z-for")){const[n,i]=e.getAttribute("z-for").split(" in ").map(e=>e.trim()),a=e.parentNode;if(!a)return;const c=document.createComment("z-for");a.insertBefore(c,e),e.remove(),e.removeAttribute("z-for");let l=[];return void o(()=>{l.forEach(e=>e.remove()),l=[];const o=r(i,t)||[];Array.isArray(o)&&o.forEach((o,i)=>{const r=e.cloneNode(!0);a.insertBefore(r,c),l.push(r);const u={...t,[n]:{value:o,_isRef:!0},index:i};s(r,u)})})}Array.from(e.attributes).forEach(({name:n,value:i})=>{if(n.startsWith("@")||n.startsWith("z-on:")){const o=n.startsWith("@")?n.slice(1):n.slice(5);e.removeAttribute(n),e.addEventListener(o,e=>{const n=t[i];"function"==typeof n?n(e):r(i,t)})}else if("z-model"===n){e.removeAttribute(n);const s="checkbox"===e.type||"radio"===e.type,a=s?"checked":"value",c=s||"SELECT"===e.tagName?"change":"input";e.addEventListener(c,()=>{let n=e[a];("radio"!==e.type||e.checked)&&t[i]&&(t[i].value=n)}),o(()=>{const n=r(i,t);"radio"===e.type?e.checked=String(e.value)===String(n):e[a]=n})}else if(n.startsWith(":")||n.startsWith("z-")){const s=n.startsWith(":")?n.slice(1):n;n.startsWith(":")&&e.removeAttribute(n),o(()=>{const n=r(i,t);"z-text"===s?e.textContent=n:"z-html"===s?e.innerHTML=n:"z-show"===s?e.style.display=n?"":"none":"style"===s&&"object"==typeof n?Object.assign(e.style,n):"class"===s&&"object"==typeof n?e.className=Object.keys(n).filter(e=>n[e]).join(" "):e.setAttribute(s,n)})}}),e.childNodes.forEach(e=>s(e,t))}}}},a="undefined"!=typeof window,c=()=>a?Object.fromEntries(new URLSearchParams(window.location.search)):{},l={h:i(a?window.location.hash:""),p:i(a?window.location.pathname:""),q:i(c())},u=()=>{a&&(l.h.value=window.location.hash,l.p.value=window.location.pathname,l.q.value=c())};a&&(window.addEventListener("hashchange",u),window.addEventListener("popstate",u));const f={get hash(){return l.h.value},get path(){return l.p.value},get query(){return l.q.value}};e.createApp=function(e){return{mount(t){const n=document.querySelector(t),o=e();s(n,o)}}},e.ref=i,e.route=f,e.watchEffect=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
